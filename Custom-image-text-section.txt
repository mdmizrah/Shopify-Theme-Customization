{% liquid
  assign image = section.settings.image
  assign title = section.settings.title
  assign desk = section.settings.desk
  assign color_scheme = section.settings.color_scheme
  assign deskfont = section.settings.deskfont
  assign titlefont = section.settings.titlefont
  assign bordervisible = section.settings.bordervisible
  assign layout_style = section.settings.layout_style
%}

{% style %}
#shopify-section-{{ section.id }} {
  padding: 40px 0;
}

.title-border {
  width: 100px!important;
  height: 2px!important;
  border-bottom: 2px solid black!important;
  margin: 10px 0; /* default desktop margin */
}

.section-wrapper {
  display: grid;
  grid-template-columns: 1fr 1fr;
  align-items: start;
  gap: 30px;
}

.section-wrapper.reverse {
  direction: rtl; /* Swap image and text visually */
}

.section-wrapper.reverse .firstcolumn,
.section-wrapper.reverse .secondcolumn {
  direction: ltr; /* Keep text readable */
}

.section-wrapper .firstcolumn img {
  width: 100%;
  height: auto;
  border-radius: 10px;
  object-fit: cover;
}

.section-wrapper .secondcolumn h2 {
  font-size: {{ titlefont }}px!important;
  font-weight: 600;
  margin-bottom: 15px;
  text-align: left; /* desktop always left */
}

.section-wrapper .secondcolumn .description {
  font-size: {{deskfont}}px;
  line-height: 1.6;
  text-align: left; /* desktop always left */
}

/* Responsive for tablets and mobiles */
@media (max-width: 768px) {
  .section-wrapper {
    grid-template-columns: 1fr;
    text-align: center;
    justify-items: center; /* center content horizontally */
  }

  .section-wrapper .secondcolumn {
    margin-top: 20px;
  }

  .section-wrapper .secondcolumn h2 {
    font-size: 24px;
    text-align: center; /* mobile center */
  }

  .section-wrapper .secondcolumn .description {
    margin: 0 auto;
    text-align: center; /* mobile center */
  }

  .section-wrapper .firstcolumn img {
    margin: 0 auto; /* center image */
  }

  .title-border {
    margin: 10px auto; /* center border on mobile */
  }
}
{% endstyle %}

<section class="{{ section.id }}">
  <div class="page-width">
    <div class="section-wrapper {% if layout_style == 'right' %}reverse{% endif %}">
      <div class="firstcolumn">
        {% if image != blank %}
          <img class="image" src="{{ image | image_url: width: 800 }}" alt="{{ title | escape }}" loading="lazy">
        {% endif %}
      </div>

      <div class="secondcolumn">
        {% if title != blank %}
          <h2 class="title color-{{ section.settings.color_scheme }} gradient">{{ title }}</h2>
        {% endif %}

        {% if bordervisible == true %}
          <div class="title-border"></div>
        {% endif %}

        {% if desk != blank %}
          <div class="description">{{ desk }}</div>
        {% endif %}
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Custom Image Text Section",
  "settings": [
    {
      "type": "header",
      "content": "Image With Text Section"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Add Title",
      "default": "Lorem Ipsum Dolor Sit"
    },
    {
      "type": "checkbox",
      "id": "bordervisible",
      "label": "Show Border",
      "default": false
    },
    {
      "type": "richtext",
      "id": "desk",
      "label": "Add Description",
      "default": "<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla vitae elit libero, a pharetra augue.</p>"
    },
    {
      "type": "range",
      "min": 0,
      "max": 100,
      "step": 10,
      "unit": "px",
      "default": 20,
      "id": "titlefont",
      "label": "Title Font Size"
    },
    {
      "type": "range",
      "min": 0,
      "max": 100,
      "step": 10,
      "unit": "px",
      "default": 20,
      "id": "deskfont",
      "label": "Description Font Size"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Heading Color",
      "default": "scheme-5"
    },
    {
      "type": "select",
      "id": "layout_style",
      "label": "Image Position",
      "default": "left",
      "options": [
        {
          "value": "left",
          "label": "Image Left / Text Right"
        },
        {
          "value": "right",
          "label": "Image Right / Text Left"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Image Text Section"
    }
  ]
}
{% endschema %}
